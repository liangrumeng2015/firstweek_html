<!DOCTYPE html>
<html>
<head>
	<title>javascript语言精粹2</title>
</head>
<body>
	<script type="text/javascript">
		//片段1
		// if(!("userName" in window)){
		// 	var userName = 'zhangsan';
		// }
		// console.log(userName);     //undefined

		//片段2
		// var obj = {
		// 	user:"zhangsan",
		// 	getName:function(){
		// 		return user;
		// 	}
		// }
		// var getNameFn = obj.getName;
		// console.log(getNameFn());    //undefined
		// console.log(obj.getName());   // zhangsan

//作用域：
//#作用域有大有小：程序级、文件级、函数级、块级
	// var global = 1;
	// function doSomething(){
	// 	var inner = 2;
	// 	globalA = 3;
	// }
	// doSomething();
	// alert(globalA);   //3
	// alert(global);   //1
	// alert(inner);    //undefined

//作用域链
//变量声明提升
//this关键字
	// 普通函数中：
	// 	严格模式：undefined
	// 	非严格模式：全局对象(window)
	// 构造函数中：对象的实例
	// 对象方法：对象本身

	// 可以改变this的调用：call、apply、bind
	// fn.call(context,arg1,arg2,...argn);
	// fn.apply(context,[arg1,arg2,...argn]);
	// function(){...}.bind(context);
//原型对象是什么？

//构造函数：
	// （1）使用new关键字调用的函数
	// （2）构造函数可以实例化一个对象
	// （3）返回值，默认返回类型的实例
	// （4）特殊情况：
	// 			没有返回值
	// 			简单数据类型
	// 			对象类型

 //原型链是怎样形成的？
 	//#（1）每个函数都有一个prototype的对象属性
 	//#（2）每个对象都有一个__proto__属性，该属性指向其父类的prototype对象 

//练习1：

	// function make(num){
	// 	return function(){
	// 		return num;
	// 	}
	// }
	// var arr = [make(0),make(1),make(2)];
	// alert(arr[0]());   //0
	// alert(arr[1]());   //1
	// alert(arr[2]());   //2

//练习2：
	// var name = 'gobal';
	// function A(name){
	// 	alert(name);    //3
	// 	this.name = name;
	// 	var name = '1';
	// }
	// A.prototype.name = 2;
	// var a = new A('3');
	// alert(a.name);      //3
	// delete a.name;    //删除a.name
	// alert(a.name);       //2  实例上的被删除了，链上的没有被删除

//练习3：(难点)
function fun(n,o){
	console.log(o);
	return{
		fun:function(m){
			return fun(m,n)
		}
	}
}
var a = fun(0);
a.fun(1);
a.fun(2);
var b = fun(0).fun(1).fun(2).fun(3);
var c = fun(0).fun(1);
c.fun(2);
c.fun(3);



//Q&A
// 闭包是什么？
// 函数式编程理念？
// 闭包的应用场景？  //for循环





//第二遍

// if(!('userName' in window)){
// 	var userName = 'zhangsan';
// }
// console.log(userName);    //undefined

// var obj = {
// 	user:'zhangsan'
// 	getName:function(){
// 		return user;
// 	}
// }
// var getNameFn = obj.getName;
// console.log(getNameFn());     //
// console.log(obj.getName());   //

function Person(name){
	this.name = name;
}
Person.prototype.getName = function(){
	return this.name;
}
var test = new Person('zhangsan');
test.getName();   //zhangsan

console.log(Person.prototype.constructor == Person);   //true
console.log(Function.prototype.constructor == Function);   //true
console.log(Object.prototype.constructor == Object);   //true
console.log(Object.constructor == Function);   //true



	</script>
</body>
</html>